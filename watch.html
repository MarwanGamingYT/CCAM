<!DOCTYPE html>
<html>
<head>
    <title>Watch CCTV</title>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="cctv-container">
        <div class="overlay">
            <div class="status-dot"></div>
            <div class="timestamp" id="timestamp"></div>
        </div>
        <video id="videoFeed" autoplay></video>
    </div>

    <script>
        const peer = new Peer({
            host: '0.peerjs.com',
            port: 443,
            secure: true,
            path: '/'
        });

        peer.on('open', () => {
            const call = peer.call('home-cctv-host');
            call.on('stream', (stream) => {
                const video = document.getElementById('videoFeed');
                video.srcObject = stream;
            });
            call.on('error', (err) => console.error('Connection failed:', err));
        });

        // Update timestamp
        function updateTime() {
            const now = new Date();
            document.getElementById('timestamp').textContent = 
                `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
        }
        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>
